<?xml version="1.0" encoding="UTF-8"?>

<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd                            http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd">
    <camelContext id="ctx_bv_integracion_botonpago" xmlns="http://camel.apache.org/schema/blueprint">
        <propertyPlaceholder id="properties" location="classpath:/conf.properties"/>
        <restConfiguration component="restlet" port="{{middleware.integracion.puerto}}">
        </restConfiguration>

        <!-- Configuracion de boton de pago -->
        <rest path="/bicevida/boton/pago">
        	<get uri="/services/ping">
                <route>
                    <log id="_logOK" message="PING OK [bv-mandato-pat]"/>
                </route>
            </get>
        
            <!-- Configuracion de historial de pago y aportes -->
            <get outType="java.lang.String" produces="application/json" uri="/consultarHistorialPagosyAportes/{rut}/{poliza}/{fechadesde}/{fechahasta}">
                <to uri="direct-vm:consultarhistorialpago"/>
            </get>
            
            <!--  Configuracion de mandato pat -->
            <post outType="java.lang.String" produces="application/json"
                type="cl.bicevida.object.InObtieneProducto" uri="/obtenerDetalleProductos/">
                <to uri="direct-vm:obtenerDetalleProductos"/>
            </post>
            <post outType="java.lang.String" produces="application/json"
                type="cl.bicevida.object.InValFormulario" uri="/validaFormulario/">
                <to uri="direct-vm:validaFormulario"/>
            </post>
            <post outType="java.lang.String" produces="application/json"
                type="cl.bicevida.object.InEnvioCorreo" uri="/enviaCorreo/">
                <to uri="direct-vm:enviaCorreo"/>
            </post>
            <get outType="java.lang.String" produces="application/json" uri="/bancosTarjeta/">
                <to uri="direct-vm:bancoTarjeta"/>
            </get>
            <get outType="java.lang.String" produces="application/json" uri="/tipoTarjeta/">
                <to uri="direct-vm:tipoTarjeta"/>
            </get>
            <post outType="java.lang.String" produces="application/json"
                type="cl.bice.vida.sam.vista.ws.MandatoDtoIn" uri="/validaAutorizacion/">
                <to uri="direct-vm:validaAutorizacion"/>
            </post>
        </rest>
    </camelContext>
</blueprint>
